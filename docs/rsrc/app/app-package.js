(()=>{"use strict";const e=class{constructor(e=window.document){this.document=e,this.ready=this.initPromise()}initPromise(){return new Promise(((e,t)=>{const r=()=>{e()};try{const t=this.document.readyState;"interactive"===t||"complete"===t?e():this.document.addEventListener("DOMContentLoaded",r,!1)}catch(e){console.error("Error initializing PromiseDom:",e),t(e)}finally{this.cleanupListeners(r)}}))}cleanupListeners(e){try{this.document.removeEventListener("DOMContentLoaded",e)}catch(e){console.error("Error cleaning up listeners:",e)}}},t=class{constructor(e='link[rel="html"]'){this.defaultSelector=e}async fetchPartial(e,t){if(t)if(e=this.getUrl(e,t))try{await this.fetchAndProcessPartial(e,t)}catch(e){console.error("fetchPartial: Error fetching partial for element:",t,e)}else console.error("fetchPartial: No URL provided for element:",t);else console.error("fetchPartial: No element provided")}async fetchAllPartials(e=this.defaultSelector){const t=document.querySelectorAll(e);try{await Promise.allSettled(Array.from(t).map((async e=>{const t=this.getUrl(void 0,e);t?await this.fetchAndProcessPartial(t,e):console.error("fetchAllPartials: No URL provided for element:",e)})))}catch(e){console.error("fetchAllPartials: Error fetching all partials:",e)}}getUrl(e,t){var r;return null!==(r=null!=e?e:null==t?void 0:t.getAttribute("href"))&&void 0!==r?r:void 0}async makeFetchRequest(e){const t=await fetch(e);if(!t.ok)throw new Error(`makeFetchRequest: Failed to fetch partial from ${e} - ${t.statusText}`);return t.text()}isSameOrigin(e){const t=window.location.origin;return t===new URL(e,t).origin}async processFetchedContent(e,t,r){this.isSameOrigin(r)?this.insertPartial(e,t):this.processPartial(e,t)}insertPartial(e,t){try{t.insertAdjacentHTML("beforebegin",e.trim()),t.remove()}catch(e){console.error("insertPartial: Error inserting HTML:",e)}}processPartial(e,t){try{const r=document.createElement("template");r.innerHTML=e.trim();const o=r.content.cloneNode(!0);o&&o.childElementCount>0?t.replaceWith(o):console.error("processPartial: Fetched content is empty or invalid for element:",t)}catch(e){console.error("processPartial: Error processing HTML:",e)}}async fetchAndProcessPartial(e,t){try{const r=await this.makeFetchRequest(e);await this.processFetchedContent(r,t,e)}catch(e){console.error("fetchAndProcessPartial: Error fetching partial for element:",t,e)}}};!async function(){const r=new e;try{await r.ready,console.log("app.start | DOM is fully loaded and parsed, continuing...");const e=document.getElementById("console42");if(e){const t=document.createElement("h3");t.textContent="Welcome to spaceface / spacesuit / version 1.0.1",e.appendChild(t)}const o=new t;await o.fetchAllPartials(),console.log("app.start | All HTML partials fetched and processed")}catch(e){console.error("app.start | Error during initialization:",e)}}()})();